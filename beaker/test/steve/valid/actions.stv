Port p1 = 1;

layout eth
{
	src : uint(48);
	dst : uint(48);
	type : uint(16);
}

decoder start eth_d(eth)
{
	extract eth.dst;
	extract eth.src;
  extract eth.type;
	set eth.type = eth.type + 80;
  set eth.dst = 880;
	clear;
  // copy eth.type = eth.src;
  write drop;
	write flood;
	write output p1;
	write output all;
	write output controller;
	write output reflow;
  write set eth.type = 0x800;
  // write copy eth.type = eth.src;

	// flood;
	// drop;
	// output all;
	// output controller;
	output reflow;
}

exact_table t1(in_port)
{
	[egress = p1]
	{ p1 } ->
	{
		output egress;
	}
}
